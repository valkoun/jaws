var iSlideShow=new Class.create; iSlideShow.prototype={initialize:function(a){this.wait=a.wait?a.wait:4E3;this.start=a.start?a.start:0;this.duration=a.duration?a.duration:0.5;this.autostart="undefined"==typeof a.autostart?!0:a.autostart;this.slides=a.slides;this.srcs=a.srcs;this.counter=a.counter;this.caption=a.caption;this.playButton=a.playButton?a.playButton:"PlayButton";this.pauseButton=a.pauseButton?a.pauseButton:"PauseButton";this.iImageId=this.start;this.play1=null;if(this.slides)(this.numOfImages=this.slides.length)||alert("No slides?"); if(this.autostart)this.startSlideShow();else if($(this.caption)&&$(this.slides[0])&&""!=$(this.slides[0]).down(".image-caption").innerHTML)$(this.caption).innerHTML=$(this.slides[0]).down(".image-caption").innerHTML},swapImage:function(a,b){"undefined"!=typeof $$("#"+this.slides[a]+" img")[0]&&$$("#"+this.slides[a]+" img")[0].src!=this.srcs[a]?($$("#"+this.slides[a]+" img")[0].src=this.srcs[a],Event.observe($$("#"+this.slides[a]+" img")[0],"load",function(){$(this.slides[a])&&$(this.slides[a]).appear({duration:this.duration}); $(this.slides[b])&&$(this.slides[b]).fade({duration:this.duration})}.bind(this))):($(this.slides[a])&&$(this.slides[a]).appear({duration:this.duration}),$(this.slides[b])&&$(this.slides[b]).fade({duration:this.duration}))},startSlideShow:function(){clearInterval(this.play1);this.play1=void 0;var a,b;a=this.iImageId+1;b=this.iImageId;a==this.numOfImages?(this.swapImage(0,b),this.iImageId=0):(this.swapImage(a,b),this.iImageId++);this.textIn=this.iImageId+1+" of "+this.numOfImages;$(this.playButton).hide(); $(this.pauseButton).appear({duration:0});this.updatecounter();this.play1=setInterval(this.play.bind(this),this.wait)},play:function(){var a,b;a=this.iImageId+1;b=this.iImageId;a==this.numOfImages?(this.swapImage(0,b),this.iImageId=0):(this.swapImage(a,b),this.iImageId++);this.textIn=this.iImageId+1+" of "+this.numOfImages;this.updatecounter()},stop:function(){clearInterval(this.play1);$(this.playButton).appear({duration:0});$(this.pauseButton).hide()},goNext:function(){clearInterval(this.play1);$(this.playButton).appear({duration:0}); $(this.pauseButton).hide();var a,b;a=this.iImageId+1;b=this.iImageId;a==this.numOfImages?(this.swapImage(0,b),this.iImageId=0):(this.swapImage(a,b),this.iImageId++);this.updatecounter()},goPrevious:function(){clearInterval(this.play1);$(this.playButton).appear({duration:0});$(this.pauseButton).hide();var a,b;a=this.iImageId-1;b=this.iImageId;0==this.iImageId?(this.swapImage(this.numOfImages-1,b),this.iImageId=this.numOfImages-1):(this.swapImage(a,b),this.iImageId--);this.updatecounter()},updatecounter:function(){var a= this.iImageId+1+" of "+this.numOfImages;$(this.counter)&&($(this.counter).innerHTML=a);if($(this.caption)&&(oNewCaption=$(this.slides[this.iImageId]).down(".image-caption")))""!=oNewCaption.innerHTML&&"<p></p>"!=oNewCaption.innerHTML?($(this.caption).style.visibility="visible",$(this.caption).innerHTML=oNewCaption.innerHTML):$(this.caption).style.visibility="hidden"}};